<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Event Booking Platform â€” Search & Filters</title>
<style>
  :root{
    --primary:#007bff; --primary-dark:#0056b3; --bg:#f4f4f4; --card:#fff; --muted:#6b7280; --radius:10px;
  }
  *{box-sizing:border-box}
  body{font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial;color:#0f172a;margin:0;background:linear-gradient(180deg,#eef6ff 0%,var(--bg) 60%);padding:20px}
  header{background:var(--primary);color:#fff;padding:14px;border-radius:10px;margin-bottom:18px;text-align:center;font-weight:700}
  .container{max-width:1200px;margin:0 auto}
  .controls{display:flex;gap:12px;flex-wrap:wrap;align-items:center;margin-bottom:16px}
  .control {background:var(--card);padding:10px;border-radius:10px;box-shadow:0 6px 18px rgba(12,40,80,0.05);display:flex;gap:8px;align-items:center}
  input[type="search"], input[type="date"], select, input[type="number"]{padding:8px;border-radius:8px;border:1px solid #e6eefc;min-width:120px}
  .btn{background:var(--primary);color:#fff;padding:9px 12px;border-radius:8px;border:0;cursor:pointer;font-weight:600}
  .btn.ghost{background:transparent;color:var(--primary);border:1px solid rgba(11,99,255,0.12)}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px}
  .card{background:var(--card);border-radius:10px;overflow:hidden;box-shadow:0 8px 30px rgba(12,40,80,0.06);display:flex;flex-direction:column}
  .card img{width:100%;height:160px;object-fit:cover}
  .card-body{padding:12px;display:flex;flex-direction:column;gap:8px;flex:1}
  .meta{color:var(--muted);font-size:13px}
  .title{font-weight:700;color:var(--primary)}
  .row{display:flex;justify-content:space-between;align-items:center;gap:8px}
  .book-btn{margin-top:auto;padding:10px;border-radius:8px;border:0;background:linear-gradient(90deg,var(--primary),#7c3aed);color:#fff;cursor:pointer;font-weight:700}
  .book-btn:hover{opacity:0.95}
  .no-results{padding:30px;text-align:center;color:var(--muted)}
  @media (max-width:720px){ .controls{flex-direction:column;align-items:stretch} .control{width:100%} }

  .modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.5);align-items:center;justify-content:center;z-index:30}
  .modal.show{display:flex}
  .modal-card{background:#fff;padding:18px;border-radius:12px;width:94%;max-width:520px;box-shadow:0 10px 40px rgba(2,6,23,0.2)}
  .modal-head{display:flex;justify-content:space-between;align-items:center}
  .close{background:transparent;border:0;font-size:20px;cursor:pointer}
  form label{display:block;font-size:13px;color:var(--muted);margin-top:8px;margin-bottom:6px}
  input, select{width:100%;padding:10px;border-radius:8px;border:1px solid #e6eefc}
  .confirm{margin-top:12px;padding:12px;border-radius:10px;border:0;background:var(--primary);color:#fff;font-weight:700;cursor:pointer;width:100%}
  .confirm:disabled{opacity:0.6;cursor:not-allowed}
</style>
</head>
<body>
<header>Event Booking Platform â€” Search & Filters</header>
<div class="container">

  <div class="controls" aria-label="Search and filters">
    <div class="control" style="flex:1;min-width:180px">
      <input id="searchInput" type="search" placeholder="Search events, titles or descriptions" aria-label="Search events"/>
    </div>

    <div class="control">
      <label for="dateFrom" class="visually-hidden">From</label>
      <input id="dateFrom" type="date" aria-label="Date from"/>
      <span style="color:var(--muted);font-size:13px">â†’</span>
      <input id="dateTo" type="date" aria-label="Date to"/>
    </div>

    <div class="control">
      <select id="locationFilter" aria-label="Filter by location">
        <option value="">All locations</option>
      </select>
    </div>

    <div class="control">
      <select id="typeFilter" aria-label="Filter by type">
        <option value="">All types</option>
      </select>
    </div>

    <div class="control">
      <label for="maxPrice" style="font-size:13px;color:var(--muted);margin-right:8px">Max $</label>
      <input id="maxPrice" type="number" min="0" placeholder="Any" style="width:100px" aria-label="Max price"/>
    </div>

    <div style="display:flex;gap:8px">
      <button id="resetBtn" class="btn ghost" title="Reset filters">Reset</button>
      <button id="applyBtn" class="btn" title="Apply filters">Apply</button>
    </div>
  </div>

  <main id="resultsArea">
    <h2 style="margin:10px 0 14px">Upcoming Events</h2>
    <div id="grid" class="grid" aria-live="polite"></div>
    <div id="noResults" class="no-results" style="display:none">No events match your search.</div>
  </main>
</div>

<div id="bookingModal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="modal-card" role="document">
    <div class="modal-head">
      <strong id="modalEventTitle">Book Event</strong>
      <button class="close" id="closeModal" aria-label="Close">&times;</button>
    </div>

    <div id="modalEventDetails" class="meta" style="margin-top:8px"></div>

    <form id="bookingForm" style="margin-top:10px">
      <label for="bName">Full name</label>
      <input id="bName" type="text" required />

      <label for="bEmail">Email address</label>
      <input id="bEmail" type="email" required />

      <label for="bTickets">Tickets</label>
      <input id="bTickets" type="number" min="1" value="1" required />

      <button id="confirmBooking" class="confirm" type="submit">Confirm Booking</button>
    </form>
  </div>
</div>

<div id="confirmToast" class="modal" aria-hidden="true" style="align-items:flex-start;pointer-events:none">
  <div class="modal-card" style="pointer-events:auto;margin-top:8vh;text-align:center">
    <strong>ðŸŽ‰ Booking Confirmed!</strong>
    <div id="confirmInfo" class="meta" style="margin-top:8px"></div>
    <div style="margin-top:12px">
      <button class="confirm" id="closeToast">OK</button>
    </div>
  </div>
</div>

<script>
const events = [
  {
    id: 'e1',
    title: 'Summer Music Festival',
    description: 'Open-air music festival featuring local and international artists.',
    datetime: '2025-06-25T18:30:00',
    location: 'New York City',
    type: 'Music',
    price: 50,
    img: 'https://th.bing.com/th/id/OIP.04deiiYbrW9BjHXF5zs5NgHaEY?w=241&h=180&c=7&r=0&o=7&dpr=1.3&pid=1.7'
  },
  {
    id: 'e2',
    title: 'Global Tech Conference',
    description: 'Talks and workshops about AI, cloud, and software engineering trends.',
    datetime: '2025-07-10T09:00:00',
    location: 'San Francisco',
    type: 'Conference',
    price: 120,
    img: 'https://th.bing.com/th/id/OIP.nxOSLPBpjdj9apK1QN3kzwHaE8?w=241&h=180&c=7&r=0&o=7&dpr=1.3&pid=1.7&rm=3'
  },
  {
    id: 'e3',
    title: 'Modern Art Exhibition',
    description: 'A curated exhibition of contemporary paintings & sculptures.',
    datetime: '2025-08-02T11:00:00',
    location: 'Paris',
    type: 'Exhibition',
    price: 30,
    img: 'https://th.bing.com/th/id/OIP.xqTVrQNCp4yJjlwFkDl0PwHaE-?w=251&h=180&c=7&r=0&o=7&dpr=1.3&pid=1.7'
  },
  {
    id: 'e4',
    title: 'Evening Jazz Nights',
    description: 'A smooth jazz evening with local musicians and special guests.',
    datetime: '2025-06-25T20:00:00',
    location: 'New York City',
    type: 'Music',
    price: 40,
    img: 'https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?auto=format&fit=crop&w=800&q=60'
  },
  {
    id: 'e5',
    title: 'Startup Pitch Day',
    description: 'Early-stage startups pitch to investors and mentors.',
    datetime: '2025-07-10T14:00:00',
    location: 'San Francisco',
    type: 'Business',
    price: 0,
    img: 'https://images.unsplash.com/photo-1507679799987-c73779587ccf?auto=format&fit=crop&w=800&q=60'
  }
];

const grid = document.getElementById('grid');
const noResults = document.getElementById('noResults');

const searchInput = document.getElementById('searchInput');
const dateFrom = document.getElementById('dateFrom');
const dateTo = document.getElementById('dateTo');
const locationFilter = document.getElementById('locationFilter');
const typeFilter = document.getElementById('typeFilter');
const maxPrice = document.getElementById('maxPrice');
const applyBtn = document.getElementById('applyBtn');
const resetBtn = document.getElementById('resetBtn');

const bookingModal = document.getElementById('bookingModal');
const modalEventTitle = document.getElementById('modalEventTitle');
const modalEventDetails = document.getElementById('modalEventDetails');
const closeModal = document.getElementById('closeModal');
const bookingForm = document.getElementById('bookingForm');
const bName = document.getElementById('bName');
const bEmail = document.getElementById('bEmail');
const bTickets = document.getElementById('bTickets');

const confirmToast = document.getElementById('confirmToast');
const confirmInfo = document.getElementById('confirmInfo');
const closeToast = document.getElementById('closeToast');

let activeEvent = null;

function populateFilters(){
  const locations = Array.from(new Set(events.map(e => e.location))).sort();
  const types = Array.from(new Set(events.map(e => e.type))).sort();

  locations.forEach(loc => {
    const o = document.createElement('option'); o.value = loc; o.textContent = loc;
    locationFilter.appendChild(o);
  });
  types.forEach(t => {
    const o = document.createElement('option'); o.value = t; o.textContent = t;
    typeFilter.appendChild(o);
  });
}

function renderEvents(list){
  grid.innerHTML = '';
  if(!list.length){
    noResults.style.display = 'block'; return;
  }
  noResults.style.display = 'none';
  list.forEach(ev => {
    const dt = new Date(ev.datetime);
    const dateStr = dt.toLocaleDateString(undefined, {year:'numeric', month:'short', day:'numeric'});
    const timeStr = dt.toLocaleTimeString(undefined, {hour:'2-digit', minute:'2-digit'});
    const card = document.createElement('article'); card.className = 'card';
    card.innerHTML = `
      <img src="${ev.img}" alt="${escapeHtml(ev.title)}" />
      <div class="card-body">
        <div class="title">${escapeHtml(ev.title)}</div>
        <div class="meta">${escapeHtml(ev.description)}</div>
        <div class="row meta" style="margin-top:6px">
          <div>${dateStr} â€¢ ${timeStr}</div>
          <div>${escapeHtml(ev.location)}</div>
        </div>
        <div class="row" style="margin-top:6px">
          <div class="meta">${escapeHtml(ev.type)}</div>
          <div style="font-weight:800">${ev.price === 0 ? 'Free' : '$' + ev.price}</div>
        </div>
        <button class="book-btn" data-id="${ev.id}" aria-label="Book ${escapeHtml(ev.title)}">Book Now</button>
      </div>
    `;
    grid.appendChild(card);
  });

  document.querySelectorAll('.book-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      const id = btn.dataset.id;
      openBooking(id);
    });
  });
}

function applyFilters(){
  const q = (searchInput.value || '').trim().toLowerCase();
  const from = dateFrom.value ? new Date(dateFrom.value + 'T00:00:00') : null;
  const to = dateTo.value ? new Date(dateTo.value + 'T23:59:59') : null;
  const loc = locationFilter.value;
  const type = typeFilter.value;
  const maxP = maxPrice.value ? Number(maxPrice.value) : null;

  const filtered = events.filter(ev => {
    const hay = (ev.title + ' ' + ev.description + ' ' + ev.location + ' ' + ev.type).toLowerCase();
    if(q && !hay.includes(q)) return false;

    const ed = new Date(ev.datetime);
    if(from && ed < from) return false;
    if(to && ed > to) return false;
    if(loc && ev.location !== loc) return false;
    if(type && ev.type !== type) return false;
    if(maxP !== null && ev.price > maxP) return false;
    return true;
  });

  filtered.sort((a,b) => new Date(a.datetime) - new Date(b.datetime));
  renderEvents(filtered);
}

function resetFilters(){
  searchInput.value = '';
  dateFrom.value = '';
  dateTo.value = '';
  locationFilter.value = '';
  typeFilter.value = '';
  maxPrice.value = '';
  applyFilters();
}

function openBooking(eventId){
  activeEvent = events.find(e => e.id === eventId);
  if(!activeEvent) return;
  modalEventTitle.textContent = activeEvent.title;
  const dt = new Date(activeEvent.datetime);
  const dateStr = dt.toLocaleDateString(undefined, {year:'numeric', month:'short', day:'numeric'});
  const timeStr = dt.toLocaleTimeString(undefined, {hour:'2-digit', minute:'2-digit'});
  modalEventDetails.textContent = `${dateStr} â€¢ ${timeStr} â€¢ ${activeEvent.location} â€¢ ${activeEvent.type} â€¢ ${activeEvent.price===0 ? 'Free' : '$'+activeEvent.price}`;
  bookingModal.classList.add('show');
  bookingModal.setAttribute('aria-hidden','false');
  bName.focus();
}

function closeBooking(){
  bookingModal.classList.remove('show');
  bookingModal.setAttribute('aria-hidden','true');
  bookingForm.reset();
  activeEvent = null;
}

bookingForm.addEventListener('submit', (e) => {
  e.preventDefault();
  if(!activeEvent) return;
  const name = bName.value.trim(); const email = bEmail.value.trim(); const tickets = Number(bTickets.value || 1);

  const dt = new Date(activeEvent.datetime);
  const dateStr = dt.toLocaleDateString(undefined, {year:'numeric', month:'short', day:'numeric'});
  const timeStr = dt.toLocaleTimeString(undefined, {hour:'2-digit', minute:'2-digit'});
  confirmInfo.innerHTML = `
    <div style="font-weight:700">${escapeHtml(activeEvent.title)}</div>
    <div class="meta" style="margin-top:6px">${dateStr} â€¢ ${timeStr} â€¢ ${escapeHtml(activeEvent.location)}</div>
    <div style="margin-top:8px">Name: ${escapeHtml(name)} â€¢ Tickets: ${tickets}</div>
    <div style="margin-top:6px;color:${activeEvent.price===0?'#059669':'#0f172a'}">${activeEvent.price===0 ? 'Free event' : 'Total: $' + (activeEvent.price * tickets)}</div>
  `;

  confirmToast.classList.add('show');
  confirmToast.setAttribute('aria-hidden','false');

  closeBooking();
});

closeToast.addEventListener('click', () => {
  confirmToast.classList.remove('show');
  confirmToast.setAttribute('aria-hidden','true');
});

function escapeHtml(s){ if(!s) return ''; return s.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;'); }

applyBtn.addEventListener('click', applyFilters);
resetBtn.addEventListener('click', resetFilters);
closeModal.addEventListener('click', closeBooking);
bookingModal.addEventListener('click', (e) => { if(e.target === bookingModal) closeBooking(); });
searchInput.addEventListener('keypress', (e) => { if(e.key === 'Enter') applyFilters(); });

populateFilters();
applyFilters();

</script>
</body>
</html>
